<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="templates/template.xhtml"
	xmlns:fu="http://java.sun.com/jsp/jstl/functions">
		
<!-- author: Jordan Taylor -->

<ui:define name="pageTitle">NB Gardens - Your Basket</ui:define>

<ui:define name="content">	
			
			<div id="title">
			<h1>Basket</h1>
			</div>			
			<ui:insert name="NBGardensCatalog">
				<h:dataTable id="catalogTable" value="#{basketController.basket}" var="orderLine" border="1">
										
					<h:column>
						<f:facet name="header">
       	     				<h:outputText value="Item Name" />
       					 </f:facet>
						<h:outputText value="#{orderLine.product.productName}"/><br/><br/>
					</h:column>
					<h:column>
						<f:facet name="header">
       	     				<h:outputText value="Item Quantity" />
       					</f:facet>
       					<h:form>
	       					<h:selectOneMenu id="quantity" value="#{productController.temp}">
										<f:selectItem itemValue="#{orderLine.quantity}" itemLabel="#{orderLine.quantity}" />
										<f:selectItem itemValue="1" itemLabel="1" />
										<f:selectItem itemValue="2" itemLabel="2" />
										<f:selectItem itemValue="3" itemLabel="3" />
										<f:selectItem itemValue="4" itemLabel="4" />
										<f:selectItem itemValue="5" itemLabel="5" />
										<f:selectItem itemValue="6" itemLabel="6" />
										<f:selectItem itemValue="7" itemLabel="7" />
										<f:selectItem itemValue="8" itemLabel="8" />
										<f:selectItem itemValue="9" itemLabel="9" />
										<f:selectItem itemValue="10" itemLabel="10" />
							</h:selectOneMenu>
							
							<input type="hidden" name="productId"
									value="#{orderLine.product.productId}" />
									
							<h:commandButton value="Update" id="updateQuantity"
									action="#{productController.updateQuantity}">
								</h:commandButton>
						</h:form>
					</h:column>
					<h:column>
						<f:facet name="header">
       	     				<h:outputText value="Individual Price" />
       					</f:facet>				
						<h:outputText value="£#{orderLine.product.productPrice}"/><br/><br/>
					</h:column>
					<h:column>
						<f:facet name="header">
       	     				<h:outputText value="Item SubTotal" />
       					</f:facet>				
						<h:outputText value="£#{orderLine.quantity *  orderLine.product.productPrice}"/><br/><br/>
					</h:column>
					<h:column>
						<h:form>
					   	 	<input type="hidden" name="productId" value="#{orderLine.product.productId}" />

							<h:commandButton value="Remove from Basket"  id="basketRemove"
								action="#{basketController.removeFromBasket}">
						</h:commandButton>
					    </h:form>
					</h:column>
				</h:dataTable>
				
   				<h2><h:outputText value="Total: £#{basketController.total}" /> </h2>
    			<br />
    			<br />
    			<h:form>
					   	<h:commandButton value="Proceed to checkout"  id="checkout"
								action="ordercheckout.xhtml">
						</h:commandButton>
				</h:form>
    			
			</ui:insert>

		</ui:define>

</ui:composition>